<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Dank Domain: the return of Hack & Slash</title>
<style>
  body {
    background-color: #000;
    color: antiquewhite;
  }
  #terminal {
    border: 0;
    top: 0; left: 0;
    width: 80%;
    height: 100%;
    position: fixed;
  }
  #Profile {
    top: 0; right: 0;
    width: 20%;
    height: 100%;
    position: fixed;
  }
  #Enemy {
    top: 50%; right: 0;
    width: 20%;
    height: 25%;
    position: fixed;
  }
  #Action {
    top: 50%; right: 0;
    width: 20%;
    height: 50%;
    position: fixed;
  }
</style>
<link rel="stylesheet" href="xterm.css">
<script>
if (window.addEventListener) {
    window.addEventListener("message", receive, false);       
}
else {
    if (window.attachEvent) {
        window.attachEvent("onmessage", receive, false);
    }
}

function receive(event) {
  if (event.data) {
    switch(event.data.func) {
      case 'emit':
        if (event.data.message) {
          socket.emit('data', termid, event.data.message);
          if (event.data.return)
            socket.emit('data', termid, '\x0A');
        }
        else {
          if (event.data.return)
            socket.emit('data', termid, '\x0D');
        }
        term.focus();
        break;

      case 'size':
        var stylesheet = document.styleSheets[0];
        for (var i in stylesheet.cssRules) {
          css = stylesheet.cssRules[i];
          if (css.selectorText === '#Action') {
            break;
          }
        }
        switch(event.data.message) {
          case 'full':
            Object.assign(css.style, { 'top':'0%', 'height':'100%', 'width':'20%' });
            break;
          case 'half':
            Object.assign(css.style, { 'top':'50%', 'height':'50%', 'width':'20%' });
            break;
          case 'small':
            Object.assign(css.style, { 'top':'75%', 'height':'25%', 'width':'20%' });
            break;
        }
        break;
    }
  }
}
</script>
</head>
<body onresize="term.fit();">
<div id="terminal"></div>
<iframe seamless id="Enemy" name="Enemy" src="./enemy.html"></iframe>
<iframe seamless id="Profile" name="Profile" src="./profile.html"></iframe>
<iframe seamless id="Action" name="Action" src="./action.html"></iframe>
<h2>Dank Domain: the return of Hack &amp; Slash</h2>
<h3>&copy;2017 Robert Hurst</h3>
<h4>use REFRESH button to start over</h4>
<input type="button" value="REFRESH" onclick="window.location.reload();">
<script src="socket.io/socket.io.js"></script>
<script src="xterm/dist/xterm.js"></script>
<script src="xterm/dist/addons/fit/fit.js"></script>
<script src="main.js"></script>
</body>
</html>