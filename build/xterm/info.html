<!doctype html>
<html>
<head>
<title>Dank Domain</title>
<link href='https://fonts.googleapis.com/css?family=Carter+One' rel='stylesheet'>
<link rel="stylesheet" href="command.css">
<style>
  body {
    text-align: center;
/*  background: antiquewhite;
    background: -webkit-linear-gradient(left top, gray, antiquewhite);
    background: -o-linear-gradient(bottom right, gray, antiquewhite);
    background: -moz-linear-gradient(bottom right, gray, antiquewhite);
*/
    background: linear-gradient(to bottom right, darkslategray, black);  /*  standard syntax (must be last)  */
    font-family: 'Carter One', cursive;
    font-size: 20px;
    color: aliceblue;
  }
</style>
<script>
if (window.addEventListener) {
    window.addEventListener("message", receive, false);       
}
else {
    if (window.attachEvent) {
        window.attachEvent("onmessage", receive, false);
    }
}

function receive(event) {
    if (event.data) {
        if (event.data.func) {
            window[event.data.func]();
            return
        }

        var html = '';
        if (event.data.jpg) {
            html += `<img src="images/${event.data.jpg}.jpg" height="98%" width="98%">`;
        }
        if (event.data.png) {
            html += `<img src="images/${event.data.png}.png" height="98%" width="98%">`;
        }
        if (event.data.handle) {
            html += `${event.data.handle}`;
        }
        if (event.data.level) {
        html += ` a level ${event.data.level} `;
        }
        if (event.data.pc) {
            html += ` ${event.data.pc} `;
        }
        nme(html);
    }
}

function nme(html) {
  document.getElementById("nme").innerHTML = html;
}

function logoff() {
  cmd(`
<img src="images/default.png" height="100%" width="100%" />
  `);
  art = setInterval(rotateImage, 100000);
}

function logon() {
  clearInterval(art);
  cmd(`
<img src="images/npc/city_guard_2.png" height="96%" width="96%" />
  `);
}

function rotateImage() {
  var images = [
    'arexielite_by_peachyco.png',
    'dragonborn_dagger_sorcerer_by_peachyco.png',
    'dragonborn_hexblade_by_peachyco.png',
    'elf_cleric_by_peachyco.png',
    'elf_fighter_by_peachyco.png',
    'guild_findsman_by_peachyco.png',
    'human_battlemage_by_peachyco.png',
    'human_enchantress_mage_by_peachyco.png',
    'human_warpriest_by_peachyco.png',
    'human_wizard_by_peachyco.png',
    'kashaw_and_zahra_by_peachyco.png',
    'krauser_dragonborn_warlord_by_peachyco.png',
    'lucien2_human_wizard_by_peachyco.png',
    'lucien_human_wizard_by_peachyco.png',
    'orc_pirate_by_peachyco.png',
    'paladin_by_peachyco.png',
    'thrask_goliath_fighter_by_peachyco.png',
    'warforged_fighter_and_human_wizard_by_peachyco.png',
    'yuriel_genasi_warlord_by_peachyco.png'
 ];

  var n = Math.trunc(Math.random() * images.length);
  cmd(`
<img src="images/${images[n]}" height="95%" width="95%" />
  `);
}
art = setInterval(rotateImage, 100000);

cancel = `<input class="wide" type="button" value="Cancel" onclick="send('\x15');">`;
enter = `<input class="wide" type="button" value="Enter" onclick="send('', true);">`;
quit = `<input class="wide" type="button" value="Quit" onclick="send('Q');">`;
logoff = `<input type="button" value="LOGOFF" onclick="send('\x1A');">`;
keypad = `<table align="center">
  <tr><td><input class="numeric" type="button" value="7" onclick="send('7');"></td><td><input class="numeric" type="button" value="8" onclick="send('8');"></td><td><input class="numeric" type="button" value="9" onclick="send('9');">
  </tr>
  <tr><td><input class="numeric" type="button" value="4" onclick="send('4');"></td><td><input class="numeric" type="button" value="5" onclick="send('5');"></td><td><input class="numeric" type="button" value="6" onclick="send('6');">
  </tr>
  <tr><td><input class="numeric" type="button" value="1" onclick="send('1');"></td><td><input class="numeric" type="button" value="2" onclick="send('2');"></td><td><input class="numeric" type="button" value="3" onclick="send('3');">
  </tr>
  <tr><td><input class="numeric" type="button" value=" 0 " onclick="send('0');"></td><td colspan=2>${enter}</td>
  </tr>
  <tr><td><input class="numeric" type="button" value=" ? " onclick="send('?');"></td><td colspan=2><input class="wide" type="button" value=" MAX " onclick="send('MAX', true);"></td>
  </tr>
  </table>`;
money = `<table align="center">
  <tr><td><input class="numeric" type="button" value="7" onclick="send('7');"></td><td><input class="numeric" type="button" value="8" onclick="send('8');"></td><td><input class="numeric" type="button" value="9" onclick="send('9');"></td><td><input class="platinum" type="button" value="P" onclick="send('p');"></td>
  </tr>
  <tr><td><input class="numeric" type="button" value="4" onclick="send('4');"></td><td><input class="numeric" type="button" value="5" onclick="send('5');"></td><td><input class="numeric" type="button" value="6" onclick="send('6');"></td><td><input class="gold" type="button" value="G" onclick="send('g');"></td>
  </tr>
  <tr><td><input class="numeric" type="button" value="1" onclick="send('1');"></td><td><input class="numeric" type="button" value="2" onclick="send('2');"></td><td><input class="numeric" type="button" value="3 " onclick="send('3');"></td><td><input class="silver" type="button" value="S" onclick="send('s');"></td>
  </tr>
  <tr><td colspan=2>${enter}</td><td><input class="numeric" type="button" value=" 0 " onclick="send('0');"></td><td><input class="copper" type="button" value="C" onclick="send('c');"></td>
  </tr>
  <tr><td colspan=2>${cancel}</td><td colspan=2><input class="wide" type="button" value=" MAX " onclick="send('MAX', true);"></td>
  </tr>
  </table>`;

function send(keystrokes, cr = false, et = 'emit') {
  window.parent.postMessage({ 'func':et, 'message':keystrokes, 'return':cr }, '*');
}

function keypress(event) {
  var x = event.which || event.keyCode;
  send(String.fromCharCode(x), false, 'kb');
}

function actionResize(profile) {
  window.parent.postMessage({
    'func':'size', 'message':profile }, location.href);  
}

function cmd(html) {
  document.getElementById("command").innerHTML = html;
}

function clear() {
  cmd('');
}

function logon() {
  cmd(`
<input class="tall" type="button" value="NEW" onclick="send('NEW', true);"> ${enter}
<p>${logoff}</p>
  `);
}

function menu() {
  cmd(`
<input type="button" value="Arena" onclick="send('A');">
<input type="button" value="Dungeon" onclick="send('D');">
<input type="button" value="Casino" onclick="send('G');"><br>
<input type="button" value="Halls" onclick="send('L');">
<input type="button" value="Most Wanted" onclick="send('M');">
<input type="button" value="Naval" onclick="send('N');"><br>
<input type="button" value="Party" onclick="send('P');">
<input type="button" value="Rob" onclick="send('R');">
<input type="button" value="Square" onclick="send('S');"><br>
<input type="button" value="Tavern" onclick="send('T');">
<input type="button" value="Reroll" onclick="send('X');">
<input type="button" value="Status" onclick="send('Y');"><br>
<input type="button" value="System" onclick="send('Z');">
<p>${logoff}</p>
  `);
}

function arena() {
  cmd(`
<input type="button" value="Cast" onclick="send('C');">
<input type="button" value="Poison" onclick="send('P');">
<input type="button" value="User" onclick="send('U');">
<input type="button" value="Monster" onclick="send('M');">
<input type="button" value="Joust" onclick="send('J');">
<input type="button" value="Status" onclick="send('Y');"><br>
<input class="tall" type="button" value="SQUARE" onclick="send('G');"> ${quit}
   `);
}

function square() {
  cmd(`
<input type="button" value="Armoury" onclick="send('A');">
<input type="button" value="Weapons" onclick="send('W');">
<input type="button" value="Real Estate" onclick="send('R');">
<input type="button" value="Security" onclick="send('S');">
<input type="button" value="Mage" onclick="send('M');">
<input type="button" value="Apothecary" onclick="send('V');">
<input type="button" value="Bank" onclick="send('B');">
<input type="button" value="Hospital" onclick="send('H');">
<input type="button" value="Pick pockets" onclick="send('P');">
<input type="button" value="Jail" onclick="send('J');"><br>
<input class="tall" type="button" value="ARENA" onclick="send('G');"> ${quit}
  `);
}

function list() {
  cmd(`
  ${keypad}
  ${cancel}
  `);
}

function bank() {
  cmd(`
${money}
<input type="button" value="Deposit" onclick="send('D');">
<input type="button" value="Withdraw" onclick="send('W');">
<input type="button" value="Loan" onclick="send('L');">
${quit}
  `);
}

function casino() {
  cmd(`
<input type="button" value="ATM" onclick="send('I');"><br>
<input type="button" value="Black Jack" onclick="send('B');">
<input type="button" value="High Card" onclick="send('H');">
<input type="button" value="Craps" onclick="send('C');">
<input type="button" value="Dogs" onclick="send('D');">
<input type="button" value="Slots" onclick="send('S');">
<input type="button" value="Keno" onclick="send('K');">
<input type="button" value="Roulette" onclick="send('R');">
`);
}

function yn() {
  cmd(`
<input class="tall" type="button" value=" Yes " onclick="send('Y');">
<p><input class="tall" type="button" value=" No " onclick="send('N');"></p>
  `);
}
</script>
</head>
<body onkeypress="keypress(event);">
<div id="nme">Profile Sheet</div>
<div id="command">Command Buttons</div>
</body>
</html>