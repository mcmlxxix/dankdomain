<!DOCTYPE html>
<html lang="en-US">

<head>
  <title>Ɗanƙ Ɗomaiƞ: the return of Hack & Slash</title>
  <link href="animate.min.css" rel="stylesheet">
  <link href="command.css" rel="stylesheet">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Carter+One&family=Grenze+Gotisch:wght@500&family=VT323&display=swap"
    rel="stylesheet">
  <meta charset="utf-8">
  <meta name="author" content="Robert Hurst">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="application-name" content="door">
  <meta name="apple-mobile-web-app-title" content="door">
  <meta name="msapplication-starturl" content="https://play.ddgame.us/">
  <meta name="viewport"
    content="width=device-width,initial-scale=1,minimum-scale=0.5,maximum-scale=1,shrink-to-fit=yes,user-scalable=no">
  <style type='text/css'>
    @font-face {
      font-family: 'notomono';
      src: url('notomono.woff2') format('woff2');
    }

    @font-face {
      font-family: 'notoemoji';
      src: url('notoemoji.woff2') format('woff2');
    }

    body {
      background: linear-gradient(to bottom right, skyblue, aliceblue);
      color: midnightblue;
      font-display: swap;
      font-family: 'Grenze Gotisch', cursive;
      font-weight: 500;
      text-align: center;
      border: none;
      margin: 0px;
      overflow: hidden;
      touch-action: none;
    }

    body::-webkit-scrollbar {
      display: none;
    }

    a:link,
    a:visited {
      color: midnightblue;
      text-decoration: none;
      display: inline-block;
    }

    a:hover,
    a:active {
      background-color: skyblue;
      color: darkslategray;
    }

    input[type=text],
    input[type=password] {
      width: 67%;
      padding: 12px 18px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    div {
      padding: 0px 0px 0px 0px;
      border: none;
    }

    hr {
      background-image: linear-gradient(to left, gainsboro, steelblue, gainsboro);
      border: 0;
      height: 1px;
    }

    img {
      max-height: 100%;
      max-width: 100%;
      object-fit: contain;
    }

    .mob {
      max-height: unset;
      max-width: unset;
    }

    p,
    table {
      border: none;
      border-spacing: 0px 2px;
      display: inline-block;
      text-align: center;
    }

    td {
      height: 100%;
      width: 19vw;
    }

    .mob {
      height: unset;
      width: unset;
    }
  </style>
</head>

<body onkeydown="keydown(event);">
  <script>
    let cookie = document.cookie || 'id=NEW';
    let cookies = cookie.split('; ');
    let id = 'new';
    if (cookies[0]) id = cookies[0].split('=')[1] || '';
    art = null;
    let images = [];
    currentCMD = null;
    fontSize = 24;
    input = false;
    const allOpt = `<input class="platinum" type="button" value="ALL" onclick="send('=', true);">`;
    const bestOpt = `<input class="platinum" type="button" value="BEST" onclick="send('=', true);">`;
    const maxOpt = `<input class="Platinum" type="button" value="MAX" onclick="send('MAX', true);">`;
    const ByeBye = `<input class="Copper" type="button" id="cancel" value="LOGOFF" onclick="send('Q');">`;
    const Cancel = `<input class="Copper" type="button" id="cancel" value="Clear" onclick="send('\x15');">`;
    const Enter = `<input class="Slate" type="button" id="default" value="Enter" onclick="send('', true);">`;
    const quit = `<input class="copper" type="button" id="cancel" value="Quit" onclick="send('Q');">`;
    const keypad = `<table>
  <tr><td><input class="Keycap" type="button" value="7" onclick="send('7');"></td><td><input class="Keycap" type="button" value="8" onclick="send('8');"></td><td><input class="Keycap" type="button" value="9" onclick="send('9');"></td></tr>
  <tr><td><input class="Keycap" type="button" value="4" onclick="send('4');"></td><td><input class="Keycap" type="button" value="5" onclick="send('5');"></td><td><input class="Keycap" type="button" value="6" onclick="send('6');"></td></tr>
  <tr><td><input class="Keycap" type="button" value="1" onclick="send('1');"></td><td><input class="Keycap" type="button" value="2" onclick="send('2');"></td><td><input class="Keycap" type="button" value="3" onclick="send('3');"></td></tr>
  <tr><td><input class="Keycap" type="button" value="0" onclick="send('0');"></td><td colspan=2>${Enter}</td></tr>
  <tr><td><input class="Silver" type="button" value="?" onclick="send('?', true);"></td><td colspan=2>${Cancel}</td></tr>
</table>`;
    const keyboard = `<table>
<tr><td><input class="Keycap" type="button" value="a" onclick="send('a');"></td><td><input class="Keycap" type="button" value="b " onclick="send('b');"></td><td><input class="Keycap" type="button" value="c " onclick="send('c');"></td><td><input class="Keycap" type="button" value="d " onclick="send('d');"></td><td><input class="Keycap" type="button" value="e " onclick="send('e');"></td></tr>
<tr><td><input class="Keycap" type="button" value="f" onclick="send('f');"></td><td><input class="Keycap" type="button" value="g " onclick="send('g');"></td><td><input class="Keycap" type="button" value="h " onclick="send('h');"></td><td><input class="Keycap" type="button" value="i " onclick="send('i');"></td><td><input class="Keycap" type="button" value="j " onclick="send('j');"></td></tr>
<tr><td><input class="Keycap" type="button" value="k" onclick="send('k');"></td><td><input class="Keycap" type="button" value="l " onclick="send('l');"></td><td><input class="Keycap" type="button" value="m " onclick="send('m');"></td><td><input class="Keycap" type="button" value="n " onclick="send('n');"></td><td><input class="Keycap" type="button" value="o " onclick="send('o');"></td></tr>
</td><td><input class="Keycap" type="button" value="p" onclick="send('p');"></td><td><input class="Keycap" type="button" value="q " onclick="send('q');"></td><td><input class="Keycap" type="button" value="r " onclick="send('r');"></td><td><input class="Keycap" type="button" value="s " onclick="send('s');"></td><td><input class="Keycap" type="button" value="t " onclick="send('t');"></td></tr>
<tr><td><input class="Keycap" type="button" value="u" onclick="send('u');"></td><td><input class="Keycap" type="button" value="v " onclick="send('v');"></td><td><input class="Keycap" type="button" value="w " onclick="send('w');"></td><td><input class="Keycap" type="button" value="x " onclick="send('x');"></td><td><input class="Keycap" type="button" value="y " onclick="send('y');"></td></tr>
</td><td><input class="Keycap" type="button" value="z" onclick="send('z');"></td><td><input class="Gold" type="button" value="@" onclick="send('@');"></td><td><input class="Gold" type="button" value="." onclick="send('.');"></td><td><input class="Gold" type="button" value="," onclick="send(',');"></td><td><input class="Gold" type="button" value="-" onclick="send('-');"></td></tr>
<tr><td><input class="Slate" type="button" value="_" onclick="send('_');"></td><td colspan=3><input class="Slate" type="button" value="SPACE BAR" onclick="send(' ');"></td><td><input class="Slate" type="button" value="⇐" onclick="send('\x08');"></td></tr>
<tr><td colspan=2>${Cancel}</td><td><input class="Silver" type="button" value="?" onclick="send('?', true);"></td><td colspan=2>${Enter}</td></tr>
</table>`;
    const money = `<table>
<tr><td><input class="Keycap" type="button" value="7" onclick="send('7');"></td><td><input class="Keycap" type="button" value="8" onclick="send('8');"></td><td><input class="Keycap" type="button" value="9" onclick="send('9');"></td><td><input class="Platinum" type="button" value="P" onclick="send('p');"></td></tr>
<tr><td><input class="Keycap" type="button" value="4" onclick="send('4');"></td><td><input class="Keycap" type="button" value="5" onclick="send('5');"></td><td><input class="Keycap" type="button" value="6" onclick="send('6');"></td><td><input class="Gold" type="button" value="G" onclick="send('g');"></td></tr>
<tr><td><input class="Keycap" type="button" value="1" onclick="send('1');"></td><td><input class="Keycap" type="button" value="2" onclick="send('2');"></td><td><input class="Keycap" type="button" value="3" onclick="send('3');"></td><td><input class="Silver" type="button" value="S" onclick="send('s');"></td></tr>
<tr><td><input class="Keycap" type="button" value="0" onclick="send('0');"><td colspan=2>${Enter}</td></td><td><input class="Copper" type="button" value="C" onclick="send('c');"></td></tr>
<tr><td colspan=2>${Cancel}</td><td colspan=2>${maxOpt}</td>
</tr></table>`;

    if (window.addEventListener)
      window.addEventListener("message", receive, false);
    /*
    else {
      if (window.attachEvent) {
        window.attachEvent("onmessage", receive, false);
      }
    }
    */
    function receive(event) {
      if (event.data) {
        if (event.data.func) {
          if (currentCMD !== event.data.func) {
            currentCMD = event.data.func;
            fontSize = event.data.fontSize;
            window[currentCMD]();
            nmeResize(undefined, true);
          }
          return;
        }

        if (event.data.anim) {
          animated(event.data.anim);
          return;
        }

        if (event.data.images) {
          images = event.data.images;
          return;
        }

        if (event.data.leader) {
          var html = `<table>
    <tr><td rowspan=2><img src="images/${event.data.banner}.png"></td><td><img src="images/${event.data.leader}.png" /></td></tr>`
          if (event.data.leader)
            html += `<tr><td><img src="images/${event.data.coat}.png" /></td></tr>`
          html += `</table>`
          nme(html)
          return;
        }

        if (event.data.mob1) {
          h = window.innerWidth - 4;
          var html = `<table width="${h}px">
    <tr><td class="mob"><img class="mob" style="max-width:${h / 2}px;" src="images/${event.data.mob1}.png" /></td><td class="mob"><img class="mob" style="max-width:${h / 2}px;" src="images/${event.data.mob2}.png" /></td></tr>`
          if (event.data.mob3)
            html += `<tr><td class="mob" colspan=2><img class="mob" style="max-width:${h * .75}px;" src="images/${event.data.mob3}.png" /></td></tr>`
          html += `</table>`
          nme(html)
          return;
        }

        var html = '<span style="font-size:larger;">';
        if (event.data.handle) {
          html += `<span style="font-size:larger;">${event.data.handle}</span>`;
        }
        if (event.data.level) {
          html += `<span style="font-family:VT323, monospace;">&nbsp;a level ${event.data.level}</span>`;
        }
        if (event.data.pc) {
          html += `<span style="font-family:VT323, monospace;">&nbsp;${event.data.pc}</span>`;
        }
        html += '</span>';
        if (event.data.jpg) {
          html += `<img src="images/${event.data.jpg}.jpg" onload="nmeResize(\'${event.data.effect}\');" style="display:none;" />`;
        }
        if (event.data.png) {
          html += `<img src="images/${event.data.png}.png" onload="nmeResize(\'${event.data.effect}\');" style="display:none;" />`;
        }
        nme(html);
      }
    }

    function reSize() {
      currentCMD = null;
      cmdResize();
    }

    function cmd(html, zoom = '100%') {
      document.getElementById("command").innerHTML = '<p>' + html + '</p>';
      cmdResize(zoom);
    }

    function nme(html) {
      document.getElementById("nme").innerHTML = html || '';
      cmdResize();
    }

    function animated(effect) {
      var img = document.getElementById("nme").getElementsByTagName('img');
      var pic = img[0];

      if (img.length == 1) {
        while (pic.classList.length)
          pic.classList.remove(pic.classList.item(0));
        pic.classList.add('animate__animated');
        var effects = effect.split(' ');
        for (var i in effects)
          pic.classList.add('animate__' + effects[i]);
        pic.style.display = 'inline-block';
      }
      else {
        for (var i in img) {
          pic = img[i];
          if (!pic.style.display)
            break;
        }
      }

      pic.classList.add('animate__animated');
      var effects = effect.split(' ');
      for (var i in effects)
        pic.classList.add('animate__' + effects[i]);
      pic.style.display = 'inline-block';
    }

    function Logon() {
      clearInterval(art); art = null;
      input = true;
      cmd(`<form onsubmit="return sendLogin();">
<input type="text" placeholder="Enter ID or Handle" id="id" name="id" required><br>
<input type="password" placeholder="Enter password" name="password" required><br>
<input type="button" value="NEW" onclick="send('NEW', true);"> <button id="default" class="silver" type="submit">Login</button>
</form><span style="font-size:smaller;">⬅️ or click left window for cursor</span>`);
      nme(`<img src="images/npc/city_guard_2.png" onload="nmeResize(\'bounceInDown\');" style="display:none;" />`);
      document.getElementById('id').value = id;
    }

    function sendLogin() {
      document.cookie = `id=${document.getElementById('id').value}; expires=Fri, 31 Dec 9999 23:59:59 GMT`;
      setTimeout(function () { send(document.forms[0].elements[0].value, true); }, 99);
      setTimeout(function () { send(document.forms[0].elements[1].value, true); }, 1440);
      return false;
    }

    function Logoff() {
      if (!art) art = setInterval(rotateImage, 14400);
      window.focus();
      input = false;
      cmd(`<input type="button" class="slate" id="cancel" value="Disconnect" onclick="currentCMD = ''; send('\x1B');"> <input type="button" class="platinum" id="default" value="CONNECT" onclick="send(' ');" type="submit"><br>
<span style="font-size:larger; font-family:notomono; font-weight:600;">🤴 <a href="https://www.ddgame.us" target="_new"><span style="color:black">Ɗanƙ Ɗomaiƞ</span></a> 👸</span><br>
<span style="color:darkslategray;">the return of Hack &amp; Slash</span><br>
<span style="color:brown; font-size:smaller;">🇺🇸 &copy; 2017 - 2020 <a href="https://robert.hurst-ri.us" target="_new">Robert Hurst</a> 🧙</span><br>
<span style="color:black; font-family:VT323, monospace;">⚡ Powered by <a href="https://xtermjs.org" target="_blank">Xterm.js</a> 🖥</span>`, '150%');
      window.dispatchEvent(new Event('resize'))	// gratuituous
    }

    function rotateImage() {
      animated('fadeOutLeft');
      if (images.length) {
        const n = Math.trunc(Math.random() * images.length);
        const profile = images.splice(n, 1)[0];

        let html = '<span style="font-size:larger;">';
        if (profile.handle) html += `<span style="font-size:larger;">${profile.handle}</span>`;
        if (profile.level) html += `<span style="font-family:VT323, monospace;">&nbsp;a level ${profile.level}</span>`;
        if (profile.pc) html += `<span style="font-family:VT323, monospace;">&nbsp;${profile.pc}</span>`;
        html += '</span>';
        if (profile.jpg) html += `<img src="images/${profile.jpg}.jpg" onload="nmeResize(\'${profile.effect}\');" style="display:none;" />`;
        if (profile.png) html += `<img src="images/${profile.png}.png" onload="nmeResize(\'${profile.effect}\');" style="display:none; filter:opacity(${/^connect/.test(profile.png) ? '40%' : '100%'});" />`;

        setTimeout(function () { nme(html); }, 1000);
      }
      else
        send('\x15');
    }

    function send(keystrokes, cr = false, et = 'emit') {
      window.parent.postMessage({ 'func': et, 'message': keystrokes, 'return': cr }, location.href);
    }
    /*
    function actionResize(profile) {
      window.parent.postMessage({
        'func': 'size', 'message': profile
      }, location.href);
    }
    */
    function clear() {
      nme('');
      cmd('');
    }

    function freetext() {
      input = true;
      cmd(`${keyboard}`);
    }

    function gender() {
      input = false;
      cmd(`<table>
<tr><td><input class="Silver" type="button" value="Male" onclick="send('M');"></td><td>&nbsp;</td><td><input class="Platinum" type="button" value="Female" onclick="send('F');"></td></tr>
</table>`, '150%');
    }

    function list() {
      input = true;
      cmd(`${keypad}`, '150%');
    }

    function listall() {
      input = true;
      cmd(`${keypad}<br>${allOpt}`, '150%');
    }

    function listbest() {
      input = true;
      cmd(`${keypad}<br>${bestOpt}`, '150%');
    }

    function listmm() {
      input = true;
      cmd(`${keypad}<br><input class="platinum" type="button" value="Monster Mash" onclick="send('M', true);">`, '150%');
    }

    function menu() {
      input = false;
      cmd(`<table>
<tr><td colspan=2>${ByeBye}</td><td colspan=2><input class="Platinum" type="button" value="Most Wanted" onclick="send('M');"></td></tr>
<tr><td colspan=4><hr></td></tr>
<tr><td><input type="button" value="Reroll" onclick="send('X');"></td><td><input type="button" value="Rob" onclick="send('R');"></td><td><input class="Silver" type="button" value="Naval" onclick="send('N');"></td><td><input class="Silver" type="button" value="Arena" onclick="send('A');"></td></tr>
<tr><td><input type="button" value="Library" onclick="send('L');"></td><td><input type="button" value="Casino" onclick="send('G');"></td><td><input class="Slate" type="button" value="Party" onclick="send('P');"></td><td><input class="Slate" type="button" value="Dungeon" onclick="send('D');"></td></tr>
<tr><td><input type="button" value="System" onclick="send('Z');"></td><td><input type="button" value="Status" onclick="send('Y');"></td><td><input class="Tavern" type="button" value="Tavern" onclick="send('T');"></td><td><input class="Tavern" type="button" value="Square" onclick="send('S');"></td></tr>
</table>`, '120%');
    }

    function ny() {
      input = true;
      cmd(`<table>
<tr><td><input class="Slate" type="button" id="cancel" value="Yes" onclick="send('Y');"></td><td><input class="Silver" type="button" value="NO" onclick="send('N');"></td></tr>
<tr><td colspan=2>${Enter}</td></tr>
</table>`, '200%');
    }

    function yn() {
      input = true;
      cmd(`<table>
<tr><td><input class="Slate" type="button" id="cancel" value="No" onclick="send('N');"></td><td><input class="Silver" type="button" value="YES" onclick="send('Y');"></td></tr>
<tr><td colspan=2>${Enter}</td></tr>
</table>`, '200%');
    }

    function arena() {
      input = false;
      cmd(`<table>
<tr><td><input class="Gold" type="button" value="User" onclick="send('U');"></td><td><input class="Silver" type="button" value="Monster" onclick="send('M');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td><input class="Slate" type="button" value="Poison" onclick="send('P');"></td><td><input class="Platinum" type="button" value="Cast" onclick="send('C');"></td></tr>
<tr><td><input type="button" value="Status" onclick="send('Y');"></td><td><input class="Gold" type="button" value="Joust" onclick="send('J');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td><input class="Tavern" type="button" value="SQUARE" onclick="send('G');"></td><td>${quit}</td></tr>
</table>`, '200%');
    }

    function bank() {
      input = true;
      nme(`<img src="images/bank.jpg" onload="nmeResize(\'pulse\');" style="display:none;" />`);
      cmd(`${money}<table>
<tr><td colspan=2></td><td colspan=2><input class="Slate" type="button" value="Deposit" onclick="send('D');"></td></tr>
<tr><td><input type="button" value="Rob" onclick="send('R');"></td><td><h1>💰</h1></td><td colspan=2><input class="Slate" type="button" value="Withdraw" onclick="send('W');"></td></tr>
<tr><td colspan=2></td><td><input class="Slate" type="button" value="Loan" onclick="send('L');"></td><td>${quit}</td></tr>
</table>`, '120%');
    }

    function battle() {
      input = true;
      cmd(`<table>
<tr><td><input class="Slate" id="cancel" type="button" value="Retreat" onclick="send('R');"></td><td><input class="Platinum" type="button" value="Cast" onclick="send('C');"></td></tr>
<tr><td><input type="button" value="Status" onclick="send('Y');"></td><td><input class="Slate" id="default" type="button" value="Attack!" onclick="send('A');"></td></tr>
</table>`, '200%');
    }

    function blackjack() {
      input = false;
      nme('');
      cmd(`<table>
<tr><td colspan=2><input class="Slate" type="button" value="Hit me!" onclick="send('H');"></td></tr>
<tr><td><input class="gold" type="button" value="Double" onclick="send('D');"></td><td><input class="silver" id="cancel" type="button" value="Stay" onclick="send('S');"></td></tr>
</table>`, '200%');
    }

    function brawl() {
      input = true;
      cmd(`<table>
<tr><td colspan=2><input class="copper" id="cancel" type="button" value="Give up" onclick="send('G');"></td><tr>
<tr><td><input type="button" value="Status" onclick="send('Y');"></td><td><input class="Slate" id="default" type="button" value="Punch!" onclick="send('P');"></td></tr>
</table>`, '200%');
    }

    function casino() {
      input = false;
      nme('');
      cmd(`<table>
<tr><td><h1>🂡</h1></td><td><input class="Slate" type="button" value="Black Jack" onclick="send('B');"></td><td><h1>🂫</h1></td></tr>
<tr><td><h1>🎲</h1></td><td><input class="Slate" type="button" value="Craps" onclick="send('C');"></td><td><h1>🎲</h1></td></tr>
<tr><td><h1>🃏</h1></td><td><input class="Slate" type="button" value="High Stakes" onclick="send('H');"></td><td><h1>🃏</h1></td></tr>
<tr><td><h1>🔢</h1></td><td><input class="Slate" type="button" value="Keno" onclick="send('K');"></td><td><h1>🔟</h1></td></tr>
<tr><td><h1>🍒💣</h1></td><td><input class="Slate" type="button" value="Slots" onclick="send('S');"></td><td><h1>🎰</h1></td></tr>
<tr><td colspan=2></td><td>${quit}</td></tr>
</table>`, '125%');
    }

    function craps() {
      input = true;
      nme('');
      cmd(`${money}<br><input class="slate" type="button" value="Roll!" onclick="send('', true);">`, '200%');
    }

    function deeds() {
      input = false;
      cmd(`<table>
<tr><td><input class="Silver" type="button" value="Champions" onclick="send('C');"></td><td><input class="Platinum" type="button" value="Heroes" onclick="send('H');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td colspan=2><input class="Gold" type="button" value="Memorable" onclick="send('M');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td><input class="Tavern" type="button" value="Thugs" onclick="send('T');"></td><td><input class="Slate" type="button" value="Winners" onclick="send('W');"></td></tr>
<tr><td></td><td>${quit}</td></tr>
</table>`, '150%');
      nme(`<img src="images/heroes.jpg" onload="nmeResize(\'bounceInUp\');" style="display:none;" />`);
    }

    function dungeon() {
      input = false;
      cmd(`<table>
<tr><td><input class="platinum" type="button" value="Cast" onclick="send('C');"></td><td><input class="Slate" type="button" value="North" onclick="send('N');"></td><td><input class="copper" type="button" value="Poison" onclick="send('P');"></td></tr>
<tr><td><input class="Slate" type="button" value="West" onclick="send('W');"></td><td><H1>🧭</H1></td><td><input class="Slate" type="button" value="East" onclick="send('E');"></td></tr>
<tr><td></td><td><input class="Slate" type="button" value="South" onclick="send('S');"></td><td><input type="button" value="Status" onclick="send('Y');"></td></tr>
</table>`, '150%');
    }

    function hunt() {
      input = true;
      cmd(`<table>
<tr><td colspan=2><input class="silver" id="cancel" type="button" value=" Sail off " onclick="send('S');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td colspan=2><input type="button" value="Status" onclick="send('Y');"></tdtd></tr>
<tr><td><input class="Slate" type="button" value="Ram" onclick="send('R');"></td><td><input class="Copper" id="default" type="button" value="Fire!" onclick="send('F');"></td></tr>
</table>`, '150%');
    }

    function joust() {
      input = true;
      cmd(`<input class="copper" id="cancel" type="button" value="Forfeit" onclick="send('F');"><br>
<input class="slate" id="default" type="button" value="Joust" onclick="send('J');">`, '200%');
    }

    function monster() {
      input = true;
      cmd(`${keypad}<br><input class="platinum" type="button" value="Demon" onclick="send('D', true);">`, '120%');
    }

    function naval() {
      input = false;
      cmd(`<table>
<tr><td><input type="button" value="Go fishing" onclick="send('G');"></td><td><h1>🐟</h1></td></tr>
<tr><td><input class="Slate" type="button" value="List" onclick="send('L');"></td><td><input class="Slate" type="button" value="Status" onclick="send('Y');"></td></tr>
<tr><td><input class="Silver" type="button" value="Hunt" onclick="send('H');"></td><td><input class="Tavern" type="button" value="Shipyard" onclick="send('S');"></td></tr>
<tr><td><input class="Gold" type="button" value="Battle" onclick="send('B');"></td><td>${quit}</td></tr>
</table>`, '125%');
    }

    function party() {
      input = true;
      nme('');
      cmd(`<table>
<tr><td><input type="button" value="Edit" onclick="send('E');"></td><td><input type="button" value="List" onclick="send('L');"></td></tr>
<tr><td><input type="button" value="Resign" onclick="send('R');"></td><td><input type="button" value="Transfer" onclick="send('T');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td colspan=2><input class="Gold" type="button" value="Most Wanted" onclick="send('M');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td><input class="Silver" type="button" value="Start" onclick="send('S');"></td><td><input class="Platinum" type="button" value="Join" onclick="send('J');"></td></tr>
<tr><td><input class="Slate" type="button" value="Fight!" onclick="send('F');"></td><td>${quit}</td></tr>
</table>`, '150%');
    }

    function payment() {
      input = true;
      nme(`<img src="images/payment.png" onload="nmeResize(\'bounce\');" style="display:none;" />`);
      cmd(`${money}`, '120%')
    }

    function potion() {
      input = true;
      cmd(`<table>
<tr><td><input class="Slate" type="button" value="Yes" onclick="send('Y');"></td><td><input class="Silver" type="button" id="default" value="NO" onclick="send('N');"></td></tr>
<tr><td colspan=2><input class="Copper" type="button" id="cancel" value="Toss" onclick="send('T');"></td></tr>
</table>`, '200%');
    }

    function riddle() {
      input = false;
      nme(`<img src="images/riddle.jpg" onload="nmeResize(\'zoomInUp\');" style="display:none;" />`);
      cmd(`<input class="platinum" type="button" value=" Platinum " onclick="send('P');"><br>
<input class="gold"     type="button" value="   Gold   " onclick="send('G');"><br>
<input class="silver"   type="button" value="  Silver  " onclick="send('S');"><br>
<input class="copper"   type="button" value="  Copper  " onclick="send('C');">`, '150%');
    }

    function shipyard() {
      input = false;
      nme('<img src="images/naval/shipyard.png" onload="nmeResize(\'swing\');" style="display:none;" />');
      cmd(`<table>
<tr><td><input class="Platinum" type="button" value="Buy" onclick="send('B');"></td><td><input class="Tavern" type="button" value="Fix" onclick="send('F');"></td></tr>
<tr><td><input class="Slate" type="button" value="Cannon" onclick="send('C');"></td><td><input class="Slate" type="button" value="Ram" onclick="send('R');"></td></tr>
<tr><td></td><td>${quit}</td></tr>
</table>`, '150%');
    }

    function square() {
      input = false;
      cmd(`<table>
<tr><td colspan=2><input type="button" value="Pick pockets" onclick="send('P');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td><input class="Slate" type="button" value="Armoury" onclick="send('A');"></td><td><input class="Slate" type="button" value="Weapon" onclick="send('W');"></td></tr>
<tr><td><input class="Tavern" type="button" value="Real Estate" onclick="send('R');"></td><td><input class="Tavern" type="button" value="Security" onclick="send('S');"></td></tr>
<tr><td><input class="Slate" type="button" value="Apothecary" onclick="send('V');"></td><td><input class="Platinum" type="button" value="Mage" onclick="send('M');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td colspan=2><input class="Silver" type="button" value="Hospital" onclick="send('H');"></td></tr>
<tr><td colspan=2><hr></td></tr>
<tr><td><input class="Slate" type="button" value="Jail" onclick="send('J');"></td><td><input class="Slate" type="button" value="Bank" onclick="send('B');"></td></tr>
<tr><td><input class="Silver" type="button" value="ARENA" onclick="send('G');"></td><td>${quit}</td></tr>
</table>`, '125%');
    }

    function tavern() {
      input = false;
      nme('');
      cmd(`<table>
<tr><td><input type="button" value="Swear" onclick="send('S');"></td><td><input type="button" value="List" onclick="send('L');"></td><td><input type="button" value="Post" onclick="send('P');"></td></tr>
<tr><td><input class="Slate" type="button" value="Old" onclick="send('Y');"></td><td><input class="Gold" type="button" value="Guzzle" onclick="send('G');"></td><td><input class="Slate" type="button" value="News" onclick="send('T');"></td></tr>
<tr><td colspan=2><input class="Silver" type="button" value="Brawl" onclick="send('B');"></td><td>${quit}</td></tr>
</table>`, '125%');
    }

    function teleport() {
      input = true;
      cmd(`<table>
<tr><td colspan=2><input class="Silver" type="button" value="Up" onclick="send('U');"></td></tr>
<tr><td><input class="Copper" type="button" id="default" value="Random" onclick="send('R');"></td><td><input class="Slate" type="button" id="cancel" value="Out" onclick="send('O');"></td></tr>
<tr><td colspan=2><input class="Platinum" type="button" value="Down" onclick="send('D');"></td></tr>
</table>`, '150%');
    }

    function wager() {
      input = true;
      nme(`<img src="images/wager.jpg" onload="nmeResize(\'pulse\');" style="display:none;" />`);
      cmd(`${money}`, '120%');
    }

    function well() {
      input = true;
      nme(`<img src="images/well.jpg" onload="nmeResize(\'fadeIn\');" style="display:none;" />`);
      cmd(`<table>
<tr><td colspan=2><input class="Slate" type="button" value="Destroy Dungeon" onclick="send('D');"></td></tr>
<tr><td><input class="Tavern" type="button" value="Key" onclick="send('K');"></td><td><input class="Platinum" type="button" value="Magic" onclick="send('M');"></td></tr>
<tr><td><input class="Gold" type="button" value="Loot" onclick="send('L');"></td><td><input class="Silver" type="button" value="Grant" onclick="send('G');"></td></tr>
<tr><td><input class="Slate" type="button" value="Resurrect" onclick="send('R');"></td><td><input class="Platinum" type="button" value="Teleport" onclick="send('T');"></td></tr>
<tr><td><input class="Silver" type="button" id="cancel" value="Fix" onclick="send('F');"></td><td><input class="Slate" type="button" value="Out" onclick="send('O');"></td></tr>
<tr><td><input class="Slate" type="button" value="Curse" onclick="send('C');"></td><td><input class="Gold" type="button" id="default" value="Bless" onclick="send('B');"></td></tr>
</table>`, '120%');
    }

    function nmeResize(effect, func) {
      if (/^<table.*/.test(document.getElementById('nme').innerHTML)) return;
      //h = window.innerHeight - document.getElementById('command').clientHeight - 20;
      h = Math.abs(window.innerHeight - 8);
      document.getElementById('nme').style.height = h + 'px';
      if ((pic = document.getElementById('nme').getElementsByTagName('img')[0]))
        pic.style.zoom = Math.trunc(100 * h / pic.height) + '%';
      if (!func) animated(effect || 'fadeIn');
    }

    function cmdResize(zoom) {
      let scale = Math.trunc(100 * (fontSize / 24));
      scale = scale < 40 ? 40 : scale > 400 ? 400 : scale;
      document.body.style.fontSize = scale + '%';
      let cmd = document.getElementById('command');
      if (zoom) {
        cmd.style.zoom = zoom;
        cmd.style.top = -document.getElementById('command').clientHeight + 'px';
      }
      //document.getElementById("command").style.transform = `scale(${scale})`;
    }

    function welcome() {
      nme('<span style="color:darkred; font-size:150%">Can you defeat the Demogorgon?</span><img src="title.jpg" onload="nmeResize(\'jackInTheBox\');" style="display:none;" />');
      Logoff();
    }

    function keydown(event) {
      switch (event.key) {
        case ' ':
        case 'Enter':
          if (input) {
            b = document.getElementById('default');
            if (b) b.click();
          }
          else
            send(' ', false, 'kb');
          return;
        case 'Escape':
          b = document.getElementById('cancel');
          if (b) {
            b.click();
            return;
          }
          break;
      }
    }
  </script>
  <div id="nme"></div>
  <div id="command"
    style="background: linear-gradient(to bottom, rgba(223, 247, 255, 0.04), rgba(215, 241, 247, 0.96)); position: relative; text-align: right; width:99%;">
  </div>
</body>

</html>
