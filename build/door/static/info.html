<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Dank Domain: the return of Hack & Slash</title>
<link rel="manifest" href="manifest.json">
<meta charset="utf-8">
<meta name="author" content="Robert Hurst">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="application-name" content="door">
<meta name="apple-mobile-web-app-title" content="door">
<meta name="msapplication-starturl" content="http://play.ddgame.us/">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=0.5,maximum-scale=1,shrink-to-fit=yes,user-scalable=no">
<link href='https://fonts.googleapis.com/css?family=Carter+One' rel='stylesheet'>
<link rel="stylesheet" href="animate.min.css">
<link rel="stylesheet" href="command.css">
<style>
  body {
    background: linear-gradient(to bottom right, skyblue, aliceblue);
    font-family: 'Carter One', cursive;
    font-size: 100%;
    color: midnightblue;
    text-align: center;
    border: none;
    margin: 0px;
    overflow: hidden;
    touch-action: none;
  }

  body::-webkit-scrollbar {
    display: none;
  }

  a:link, a:visited {
    color: midnightblue;
    text-decoration: none;
    display: inline-block;
  }
  a:hover, a:active {
    background-color: skyblue;
    color: darkslategray;
  }

  input[type=text],
  input[type=password] {
    width: 86%;
    padding: 12px 18px;
    margin: 8px 0;
    display: inline-block;
    border: 1px solid #ccc;
    box-sizing: border-box;
  }

  div {
    padding: .5em;
    border: none;
  }

  img {
    max-height: 100%;
    max-width: 100%;
    object-fit: contain;
  }
  p, table {
    border: none;
    border-spacing: 0px;
    display: inline-block;
    padding: 1px 1px;
    text-align: center;
  }
</style>
<script>
let cookie = document.cookie || 'id=NEW';
let cookies = cookie.split('; ');
let id = 'new';
if (cookies[0]) id = cookies[0].split('=')[1] || '';
art = null;
currentCMD = null;
fontSize = 16;
input = false;
all = `<input class="platinum" class="tall" type="button" value=" ALL " onclick="send('=', true);">`
best = `<input class="platinum" class="tall" type="button" value=" BEST " onclick="send('=', true);">`
cancel = `<input class="copper" type="button" id="cancel" value="Clear" onclick="send('\x15');">`;
enter = `<input class="slate" type="button" id="default" value="Enter" onclick="send('', true);">`;
logoff = `<input class="copper" type="button" id="cancel" value="LOGOFF" onclick="send('Q');">`;
max = `<input class="platinum" type="button" value=" MAX " onclick="send('MAX', true);">`
quit = `<input class="copper" type="button" id="cancel" value="Quit" onclick="send('Q');">`;
keypad = `<table>
<tr><td><input class="numeric" type="button" value="7 " onclick="send('7');"></td><td><input class="numeric" type="button" value="8 " onclick="send('8');"></td><td><input class="numeric" type="button" value="9 " onclick="send('9');"></td>
</tr>
<tr><td><input class="numeric" type="button" value="4 " onclick="send('4');"></td><td><input class="numeric" type="button" value="5 " onclick="send('5');"></td><td><input class="numeric" type="button" value="6 " onclick="send('6');"></td>
</tr>
<tr><td><input class="numeric" type="button" value="1  " onclick="send('1');"></td><td><input class="numeric" type="button" value="2 " onclick="send('2');"></td><td><input class="numeric" type="button" value="3 " onclick="send('3');"></td>
</tr>
<tr><td><input class="numeric" type="button" value="0 " onclick="send('0');"></td><td colspan=2>${enter}</td>
</tr>
<tr><td><input class="silver" type="button" value="?" onclick="send('?', true);"></td><td colspan=2>${cancel}</td>
</tr>
</table>`;
keyboard = `<table>
<tr><td><input type="button" value=" a " onclick="send('a');"></td><td><input type="button" value=" b " onclick="send('b');"></td><td><input type="button" value=" c " onclick="send('c');"></td><td><input type="button" value=" d " onclick="send('d');"></td><td><input type="button" value=" e " onclick="send('e');"></td></tr>
<tr><td><input type="button" value=" f " onclick="send('f');"></td><td><input type="button" value=" g " onclick="send('g');"></td><td><input type="button" value=" h " onclick="send('h');"></td><td><input type="button" value=" i " onclick="send('i');"></td><td><input type="button" value=" j " onclick="send('j');"></td></tr>
<tr><td><input type="button" value=" k " onclick="send('k');"></td><td><input type="button" value=" l " onclick="send('l');"></td><td><input type="button" value=" m " onclick="send('m');"></td><td><input type="button" value=" n " onclick="send('n');"></td><td><input type="button" value=" o " onclick="send('o');"></td></tr>
</td><td><input type="button" value=" p " onclick="send('p');"></td><td><input type="button" value=" q " onclick="send('q');"></td><td><input type="button" value=" r " onclick="send('r');"></td><td><input type="button" value=" s " onclick="send('s');"></td><td><input type="button" value=" t " onclick="send('t');"></td></tr>
<tr><td><input type="button" value=" u " onclick="send('u');"></td><td><input type="button" value=" v " onclick="send('v');"></td><td><input type="button" value=" w " onclick="send('w');"></td><td><input type="button" value=" x " onclick="send('x');"></td><td><input type="button" value=" y " onclick="send('y');"></td></tr>
</td><td><input type="button" value=" z " onclick="send('z');"></td><td><input type="button" value=" @ " onclick="send('@');"></td><td><input type="button" value=" - " onclick="send('-');"></td><td><input type="button" value=" + " onclick="send('+');"></td><td><input type="button" value=" . " onclick="send('.');"></td></tr>
</table><br>
<input class="silver" type="button" value=" ? " onclick="send('?', true);"> <input class="wide" type="button" value=" SPACE BAR " onclick="send(' ');"><br>
${cancel} ${enter}`;
money = `<table><tr><td><input class="numeric" type="button" value="7 " onclick="send('7');"></td><td><input class="numeric" type="button" value="8 " onclick="send('8');"></td><td><input class="numeric" type="button" value="9 " onclick="send('9');"></td><td><input class="platinum" type="button" value="P" onclick="send('p');"></td>
</tr>
<tr><td><input class="numeric" type="button" value="4 " onclick="send('4');"></td><td><input class="numeric" type="button" value="5 " onclick="send('5');"></td><td><input class="numeric" type="button" value="6 " onclick="send('6');"></td><td><input class="gold" type="button" value="G" onclick="send('g');"></td>
</tr>
<tr><td><input class="numeric" type="button" value="1  " onclick="send('1');"></td><td><input class="numeric" type="button" value="2 " onclick="send('2');"></td><td><input class="numeric" type="button" value="3 " onclick="send('3');"></td><td><input class="silver" type="button" value="S" onclick="send('s');"></td>
</tr>
<tr><td><input class="numeric" type="button" value="0 " onclick="send('0');"><td colspan=2>${enter}</td></td><td><input class="copper" type="button" value="C" onclick="send('c');"></td>
</tr>
<tr><td colspan=2>${cancel}</td><td colspan=2>${max}</td>
</tr></table>`;
images = [
    'arexielite_by_peachyco.png',
    'dragonborn_dagger_sorcerer_by_peachyco.png',
    'dragonborn_hexblade_by_peachyco.png',
    'elf_cleric_by_peachyco.png',
    'elf_fighter_by_peachyco.png',
    'guild_findsman_by_peachyco.png',
    'human_battlemage_by_peachyco.png',
    'human_enchantress_mage_by_peachyco.png',
    'human_warpriest_by_peachyco.png',
    'human_wizard_by_peachyco.png',
    'kashaw_and_zahra_by_peachyco.png',
    'krauser_dragonborn_warlord_by_peachyco.png',
    'lucien2_human_wizard_by_peachyco.png',
    'lucien_human_wizard_by_peachyco.png',
    'orc_pirate_by_peachyco.png',
    'paladin_by_peachyco.png',
    'thrask_goliath_fighter_by_peachyco.png',
    'warforged_fighter_and_human_wizard_by_peachyco.png',
    'yuriel_genasi_warlord_by_peachyco.png'
  ];

if (window.addEventListener) {
  window.addEventListener("message", receive, false);
}
else {
  if (window.attachEvent) {
    window.attachEvent("onmessage", receive, false);
  }
}

function receive(event) {
  if (event.data) {
    if (event.data.func) {
      if (currentCMD !== event.data.func) {
        currentCMD = event.data.func;
        fontSize = event.data.fontSize;
        window[currentCMD]();
        nmeResize(undefined, true);
      }
      return;
    }

    if (event.data.anim) {
      animated(event.data.anim);
      return;
    }

    if (event.data.leader) {
      var html = `<table align="center">
    <tr><td rowspan=2><img src="images/${event.data.banner}.png"></td><td><img src="images/${event.data.leader}.png" /></td></tr>`
      if (event.data.leader)
        html += `<tr><td><img src="images/${event.data.coat}.png" /></td></tr>`
      html += `</table>`
      nme(html)
      return;
    }

    if (event.data.mob1) {
      var html = `<table align="center">
    <tr><td><img src="images/${event.data.mob1}.png"></td><td><img src="images/${event.data.mob2}.png" /></td></tr>`
      if (event.data.mob3)
        html += `<tr><td colspan=2><img src="images/${event.data.mob3}.png" /></td></tr>`
      html += `</table>`
      nme(html)
      return;
    }

    var html = '';
    if (event.data.handle) {
      html += `${event.data.handle}`;
    }
    if (event.data.level) {
      html += ` a level ${event.data.level} `;
    }
    if (event.data.pc) {
      html += ` ${event.data.pc} `;
    }
    if (html.length) html += '<br>';
    if (event.data.jpg) {
      html += `<img src="images/${event.data.jpg}.jpg" onload="nmeResize(\'${event.data.effect}\');" style="display:none;" />`;
    }
    if (event.data.png) {
      html += `<img src="images/${event.data.png}.png" onload="nmeResize(\'${event.data.effect}\');" style="display:none;" />`;
    }
    nme(html);
  }
}

function reSize() {
  currentCMD = null;
  cmdResize();
}

function cmd(html) {
  document.getElementById("command").innerHTML = '<p>' + html + '</p>';
  cmdResize();
}

function nme(html) {
  document.getElementById("nme").innerHTML = html || '';
  cmdResize();
}

function animated(effect) {
  var img = document.getElementById("nme").getElementsByTagName('img');
  var pic = img[0];

  if (img.length == 1) {
    while (pic.classList.length)
      pic.classList.remove(pic.classList.item(0));
    pic.classList.add('animated');
    var effects = effect.split(' ');
    for (var i in effects)
      pic.classList.add(effects[i]);
    pic.style.display = 'inline-block';
  }
  else {
    for (var i in img) {
      pic = img[i];
      if (!pic.style.display)
        break;
    }
  }

  pic.classList.add('animated');
  var effects = effect.split(' ');
  for (var i in effects)
    pic.classList.add(effects[i]);
  pic.style.display = 'inline-block';
}

function Logon() {
  clearInterval(art); art = null;
  input = true;
  cmd(`<form onsubmit="return sendLogin();"><input type="text" placeholder="Enter ID or Handle" id="id" name="id" required> <input type="password" placeholder="Enter password" name="password" required> <button class="slate" type="submit">Login</button> <input type="button" value="NEW" onclick="send('NEW', true);"></form><span style="font-size:smaller;">⬅️ click left window for cursor</span>`);
  nme(`<img src="images/npc/city_guard_2.png" onload="nmeResize(\'bounceInDown\');" style="display:none;" />`);
  document.getElementById('id').value = id;
}

function sendLogin() {
  document.cookie = `id=${document.getElementById('id').value}; expires=Fri, 31 Dec 9999 23:59:59 GMT`;
  setTimeout(function () { send(document.forms[0].elements[0].value, true); }, 99);
  setTimeout(function () { send(document.forms[0].elements[1].value, true); }, 1440);
  return false;
}

function Logoff() {
  if (!art) art = setInterval(rotateImage, 22500);
  window.focus();
  input = false;
  cmd(`<input type="button" id="cancel" value="Disconnect" onclick="send('\x1B');"> <input class="platinum" id="default" value="CONNECT" onclick="send(' ');" type="submit"><br>
<span style="font-size:larger">🤴 <a href="https://ddgame.us" target="_new"><span style="color:black !important">Dank Domain</span></a> 👸</span><br>
<span style="color:brown !important;">the return of Hack &amp; Slash<br>
🇺🇸 <span style="font-size:smaller;">&copy;2017-2018 <a href="https://robert.hurst-ri.us" target="_new">Robert Hurst</a></span></span> 🧙`);
}

function rotateImage() {
  animated('fadeOutLeft');
  if (images.length) {
    n = Math.trunc(Math.random() * images.length);
    pic = images.splice(n,1);
    setTimeout(function () {
      nme(`<img src="images/connect/${pic}" onload="nmeResize(\'fadeInRight\');" style="display:none; filter: opacity(40%);" />`);
    }, 1000);
  }
  else
    window.location.reload();
}

function send(keystrokes, cr = false, et = 'emit') {
  window.parent.postMessage({ 'func': et, 'message': keystrokes, 'return': cr }, location.href);
}
/*
function actionResize(profile) {
  window.parent.postMessage({
    'func': 'size', 'message': profile
  }, location.href);
}
*/
function clear() {
  cmd('');
}

function freetext() {
  cmd(`${keyboard}`);
}

function gender() {
  cmd(`<input class="tall" type="button" value="Male" onclick="send('M');"> <input class="tall" type="button" value="Female" onclick="send('F');">`);
}

function list() {
  cmd(`${keypad}`);
}

function listall() {
  cmd(`${keypad}<br>${all}`);
}

function listbest() {
  cmd(`${keypad}<br>${best}`);
}

function listmm() {
  cmd(`${keypad}<br><input class="platinum" type="button" value="Monster Mash" onclick="send('M', true);">`);
}

function menu() {
  nme('');
  cmd(`<table>
<tr><td colspan=2>${logoff}</td></tr>
<tr><td><input type="button" value="Reroll" onclick="send('X');"></td><td><input type="button" value="Rob" onclick="send('R');"></td></tr>
<tr><td><input type="button" value="Casino" onclick="send('G');"></td><td><input type="button" value="Halls" onclick="send('L');"></td></tr>
<tr><td><input type="button" value="System" onclick="send('Z');"></td><td><input type="button" value="Status" onclick="send('Y');"></td></tr>
<tr><td colspan=2><input class="gold" type="button" value="Most Wanted" onclick="send('M');"></td></tr>
<tr><td><input class="silver" type="button" value="Naval" onclick="send('N');"></td><td><input class="silver" type="button" value="Arena" onclick="send('A');"></td></tr>
<tr><td><input class="slate" type="button" value="Party" onclick="send('P');"></td><td><input class="slate" type="button" value="Dungeon" onclick="send('D');"></td></tr>
<tr><td><input class="platinum" type="button" value="Tavern" onclick="send('T');"></td><td><input class="platinum" type="button" value="Square" onclick="send('S');"></td></tr>
</table>`);
}

function ny() {
  cmd(`<input class="tall" type="button" id="cancel" value=" Yes " onclick="send('Y');"> <input class="tall" type="button" value=" NO " onclick="send('N');"><br>${enter}`);
}

function yn() {
  cmd(`<input class="tall" type="button" id="cancel" value=" No " onclick="send('N');"> <input class="tall" type="button" value=" YES " onclick="send('Y');"><br>${enter}`);
}

function arena() {
  cmd(`<table>
<tr><td><input class="copper" type="button" value="Poison" onclick="send('P');"></td><td><input class="platinum" type="button" value="Cast" onclick="send('C');"></td></tr>
<tr><td><input class="silver" type="button" value="User" onclick="send('U');"></td><td><input class="silver" type="button" value="Monster" onclick="send('M');"></td></tr>
<tr><td><input type="button" value="Status" onclick="send('Y');"></td><td><input class="gold" type="button" value="Joust" onclick="send('J');"></td></tr>
<tr><td>${quit}</td><td><input class="platinum" type="button" value="SQUARE" onclick="send('G');"></td></tr>
</table>`);
}

function bank() {
  cmd(`${money}<br>
<input class="copper" type="button" value="Loan" onclick="send('L');"> <input class="slate" type="button" value="Deposit" onclick="send('D');"><br>
<input class="gold" type="button" value="Withdraw" onclick="send('W');"><br>
<input type="button" value="Rob" onclick="send('R');"> ${quit}`);
  nme(`<img src="images/bank.jpg" onload="nmeResize(\'pulse\');" style="display:none;" />`);
}

function battle() {
  cmd(`<input class="copper" id="cancel" type="button" value="Retreat" onclick="send('R');"> <input class="platinum" type="button" value="Cast" onclick="send('C');"><br>
  <input type="button" value="Status" onclick="send('Y');"> <input class="slate" id="default" type="button" value="Attack" onclick="send('A');">`);
}

function blackjack() {
  nme('');
  cmd(`<input class="gold" type="button" value="Double" onclick="send('D');"><br>
<input class="slate" type="button" value=" Hit me! " onclick="send('H');"><br>
<input class="copper" type="button" value="Stay" onclick="send('S');">`);
}

function brawl() {
  cmd(`<input class="copper" type="button" value="Give up" onclick="send('G');"><br>
<input type="button" value="Status" onclick="send('Y');"> <input class="slate" id="default" type="button" value="Punch!" onclick="send('P');">`);
}

function casino() {
  nme('');
  cmd(`<input type="button" value="Black Jack" onclick="send('B');"> <input type="button" value="Craps" onclick="send('C');"> <input type="button" value="High Stakes" onclick="send('H');">
<input type="button" value="Keno" onclick="send('K');"> <input type="button" value="Slots" onclick="send('S');"> ${quit}`);
}

function craps() {
  nme('');
  cmd(`${money}<br><input class="slate" type="button" value="Roll!" onclick="send('', true);">`);
}

function deeds() {
  cmd(`<input type="button" value="Champions" onclick="send('C');"> <input type="button" value="Heroes" onclick="send('H');"> <input type="button" value="Memorable" onclick="send('M');"> <input type="button" value="Thugs" onclick="send('T');"> <input type="button" value="Winners" onclick="send('W');"> ${quit}`);
  nme(`<img src="images/heroes.jpg" onload="nmeResize(\'bounceInUp\');" style="display:none;" />`);
}

function dungeon() {
  cmd(`<input type="button" value="Status" onclick="send('Y');"> <input class="copper" type="button" value="Poison" onclick="send('P');"> <input class="platinum" type="button" value="Cast" onclick="send('C');"><br>
<input class="slate" type="button" value="North" onclick="send('N');"><br>
<input class="slate" type="button" value="West" onclick="send('W');"><span style="font-size:xx-large;">🧭</span><input class="slate" type="button" value="East" onclick="send('E');"><br>
<input class="slate" type="button" value="South" onclick="send('S');">`);
}

function hunt() {
  cmd(`<input class="silver" id="cancel" type="button" value="Sail off" onclick="send('S');"><br>
<input class="platinum" type="button" value="Ram" onclick="send('R');"> <input type="button" value="Status" onclick="send('Y');"><br>
<input class="slate" id="default" type="button" value=" Fire! " onclick="send('F');">`);
}

function joust() {
  cmd(`<input class="copper" id="cancel" type="button" value="Forfeit" onclick="send('F');"><br>
<input class="slate" id="default" type="button" value="Joust" onclick="send('J');">`);
}

function monster() {
  cmd(`${keypad}<br><input class="platinum" type="button" value="Demon" onclick="send('D', true);">`);
}

function naval() {
  cmd(`<input type="button" value="Go Fishing" onclick="send('G');"><br>
<input type="button" value="List" onclick="send('L');"> <input type="button" value="Status" onclick="send('Y');"> <input class="silver" type="button" value="Hunt" onclick="send('H');"> <input class="platinum" class="tall" type="button" value="Shipyard" onclick="send('S');"><br>
${quit} <input class="slate" type="button" value="Battle" onclick="send('B');">`);
}

function party() {
  nme('');
  cmd(`<table>
<tr><td><input type="button" value="Edit" onclick="send('E');"></td><td><input type="button" value="List" onclick="send('L');"></td></tr>
<tr><td><input type="button" value="Resign" onclick="send('R');"></td><td><input type="button" value="Transfer" onclick="send('T');"></td></tr>
<tr><td colspan=2><input class="gold" type="button" value="Most Wanted" onclick="send('M');"></td></tr>
<tr><td><input class="silver" type="button" value="Start" onclick="send('S');"></td><td><input class="platinum" type="button" value="Join" onclick="send('J');"></td></tr>
<tr><td>${quit}</td><td><input class="slate" type="button" value=" Fight " onclick="send('F');"></td></tr>
</table>`);
}

function payment() {
  cmd(`${money}`)
  nme(`<img src="images/payment.png" onload="nmeResize(\'bounce\');" style="display:none;" />`);
}

function potion() {
  cmd(`<input class="wide" type="button" value="Toss" onclick="send('T');"><br>
<input class="tall" type="button" value=" Yes " onclick="send('Y');"> <input class="tall" type="button" value=" No " onclick="send('N');">`);
}

function riddle() {
  cmd(`<input class="platinum" type="button" value=" Platinum " onclick="send('P');"><br>
<input class="gold"     type="button" value="   Gold   " onclick="send('G');"><br>
<input class="silver"   type="button" value="  Silver  " onclick="send('S');"><br>
<input class="copper"   type="button" value="  Copper  " onclick="send('C');">`);
  nme(`<img src="images/riddle.jpg" onload="nmeResize(\'zoomInUp\');" style="display:none;" />`);
}

function shipyard() {
  cmd(`<input type="button" value="Buy" onclick="send('B');"> <input type="button" value="Fix" onclick="send('F');">
<input type="button" value="Cannon" onclick="send('C');"> <input type="button" value="Ram" onclick="send('R');"> ${quit}`);
  nme('<br><img src="images/naval/shipyard.png" onload="nmeResize(\'swing\');" style="display:none;" />');
}

function square() {
  cmd(`<input type="button" value="Pick pockets" onclick="send('P');"><br>
<input type="button" value="Armoury" onclick="send('A');"> <input type="button" value="Weapons" onclick="send('W');"><br>
<input type="button" value="Real Estate" onclick="send('R');"> <input type="button" value="Security" onclick="send('S');"><br>
<input type="button" value="Apothecary" onclick="send('V');"> <input type="button" value="Mage" onclick="send('M');"><br>
<input class="platinum" type="button" value="Hospital" onclick="send('H');"><br>
<input type="button" value="Jail" onclick="send('J');"> <input class="slate" type="button" value="Bank" onclick="send('B');"><br>
${quit} <input class="silver" type="button" value="ARENA" onclick="send('G');">`);
}

function tavern() {
  nme('');
  cmd(`<table>
<tr><td><input type="button" value="Swear" onclick="send('S');"></td><td><input type="button" value="List" onclick="send('L');"></td><td><input type="button" value="Post" onclick="send('P');"></td></tr>
<tr><td><input type="button" value="Old" onclick="send('Y');"></td><td><input class="gold" type="button" value="Guzzle" onclick="send('G');"></td><td><input type="button" value="News" onclick="send('T');"></td></tr>
<tr><td>${quit}</td><td colspan=2><input class="slate" type="button" value="Brawl" onclick="send('B');"></td></tr>
</table>`);
}

function teleport() {
  cmd(`<input class="silver" type="button" value=" Up " onclick="send('U');"><br>
<input class="copper" type="button" value="Random" onclick="send('R');"> <input class="slate" type="button" value="Out" onclick="send('O');"><br>
<input class="platinum" type="button" value="Down" onclick="send('D');">`);
}

function wager() {
  cmd(`${money}`);
  nme(`<img src="images/wager.jpg" onload="nmeResize(\'pulse\');" style="display:none;" />`);
}

function well() {
  cmd(`<input type="button" value="Bless" onclick="send('B');">
<input type="button" value="Teleport" onclick="send('T');">
<input type="button" value="Destroy" onclick="send('D');">
<input type="button" value="Out" onclick="send('O');">
<input type="button" value="Resurrect" onclick="send('R');">
<input type="button" value="Fix" onclick="send('F');">
<input type="button" value="Loot" onclick="send('L');">
<input type="button" value="Grant" onclick="send('G');">
<input type="button" value="Curse" onclick="send('C');">
<input type="button" value="Key" onclick="send('K');">
<input type="button" value="Magic" onclick="send('M');">`);
}

function nmeResize(effect, func) {
  if (/^<table.*/.test(document.getElementById('nme').innerHTML)) return;
  //h = window.innerHeight - document.getElementById('command').clientHeight - 20;
  h = Math.abs(window.innerHeight - 8);
  document.getElementById('nme').style.height = h + 'px';
  if ((pic = document.getElementById('nme').getElementsByTagName('img')[0]))
    pic.style.zoom = Math.trunc(100 * h / pic.height) + '%';
  if (!func) animated(effect || 'fadeIn');
}

function cmdResize() {
  let scale = Math.trunc(100 * (fontSize / 16));
  scale = scale < 35 ? 35 : scale > 175 ? 175 : scale;
  document.body.style.fontSize = scale + '%';
  document.getElementById('command').style.top = -document.getElementById('command').clientHeight + 'px';
  //document.getElementById("command").style.transform = `scale(${scale})`;
}

function welcome() {
  Logoff();
  nme('<img src="images/arena/demogorgon.jpg" onload="nmeResize(\'jackInTheBox\');" style="display:none;" />');
  window.focus();
}

function keydown(event) {
  switch (event.key) {
    case ' ':
    case 'Enter':
      if (input) {
        b = document.getElementById('default');
        if (b) b.click();
      }
      else
        send(' ', false, 'kb');
      return;
    case 'Escape':
      b = document.getElementById('cancel');
      if (b) {
        b.click();
        return;
      }
      break;
    case 'F2':
      send(event.key, false, 'kb');
      break;
  }
}

</script>
</head>
<body onkeydown="keydown(event);" onload="welcome();">
  <div id="nme"></div>
  <div id="command" style="background: linear-gradient(to bottom, rgba(223, 239, 255, 0.04), rgba(112, 120, 128, 0.96)); position: relative; text-align: right;  width:96%;"></div>
</body>
</html>