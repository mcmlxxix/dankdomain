<!doctype html>
<html>
<head>
<title>Dank Domain: Profile</title>
<style>
  body {
    text-align: center;
    background: antiquewhite;  /*  older browsers  */
    background: -webkit-linear-gradient(left top, antiquewhite, gray);  /*  safari 5.1 to 6.0  */
    background: -o-linear-gradient(bottom right, antiquewhite, gray );  /*  opera 11.1 to 12.0  */
    background: -moz-linear-gradient(bottom right, antiquewhite, gray);  /*  firefox 3.6 to 15  */
    background: linear-gradient(to bottom right, white, skyblue);  /*  standard syntax (must be last)  */
  }
</style>
</head>
<script>
if (window.addEventListener) {
    window.addEventListener("message", receive, false);       
}
else {
    if (window.attachEvent) {
        window.attachEvent("onmessage", receive, false);
    }
}

function receive(event) {
  if (event.data) {
    if (event.data.func) {
      window[event.data.func]();
      return
    }

    var html = '';
    if (event.data.jpg) {
      html += `<img src="images/${event.data.jpg}.jpg" height="98%" width="98%">`;
    }
    if (event.data.png) {
      html += `<img src="images/${event.data.png}.png" height="98%" width="98%">`;
    }
    if (event.data.handle) {
      html += `${event.data.handle}`;
    }
    if (event.data.level) {
      html += ` a level ${event.data.level} `;
    }
    if (event.data.pc) {
      html += ` ${event.data.pc} `;
    }
    cmd(html);
  }
}

function cmd(html) {
  document.getElementById("sheet").innerHTML = html;
}

function keypress(event) {
  var x = event.which || event.keyCode;
  send(String.fromCharCode(x), false, 'kb');
}

function logoff() {
  cmd(`
<img src="images/default.png" height="100%" width="100%" />
  `);
  art = setInterval(rotateImage, 100000);
}

function logon() {
  clearInterval(art);
  cmd(`
<img src="images/npc/city_guard_2.png" height="96%" width="96%" />
  `);
}

function rotateImage() {
  var images = [
    'arexielite_by_peachyco.png',
    'dragonborn_dagger_sorcerer_by_peachyco.png',
    'dragonborn_hexblade_by_peachyco.png',
    'elf_cleric_by_peachyco.png',
    'elf_fighter_by_peachyco.png',
    'guild_findsman_by_peachyco.png',
    'human_battlemage_by_peachyco.png',
    'human_enchantress_mage_by_peachyco.png',
    'human_warpriest_by_peachyco.png',
    'human_wizard_by_peachyco.png',
    'kashaw_and_zahra_by_peachyco.png',
    'krauser_dragonborn_warlord_by_peachyco.png',
    'lucien2_human_wizard_by_peachyco.png',
    'lucien_human_wizard_by_peachyco.png',
    'orc_pirate_by_peachyco.png',
    'paladin_by_peachyco.png',
    'thrask_goliath_fighter_by_peachyco.png',
    'warforged_fighter_and_human_wizard_by_peachyco.png',
    'yuriel_genasi_warlord_by_peachyco.png'
 ];

  const artwork = document.getElementById('artwork');
  var n = Math.trunc(Math.random() * images.length);
  cmd(`
<img src="images/${images[n]}" height="95%" width="95%" />
  `);
}
art = setInterval(rotateImage, 100000);
</script>
</head>
<body onkeypress="keypress(event);">
<div id="sheet">Profile Sheet</div>
</body>
</html>